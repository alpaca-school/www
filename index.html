<!DOCTYPE html>
<html lang="ja">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>アルパカすく〜る｜体験フロア 🦙</title>
  <link rel="icon"
    href="https://lh6.googleusercontent.com/HUVxVFqoa_HrqwbO5sJ2JLzW8zY1A2HWxKXhjxrLsOG__vg47Yqrj85Vc1kSb9FxaFmxYM2tp2IBQ5r8mq0dh36txvYtg3hFfBowEr6rJiBaoG5bSmRmqYHmOA=w16383">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap');

    body {
      font-family: 'M PLUS Rounded 1c', sans-serif;
    }

    .text-fluid-4xl {
      font-size: clamp(2rem, 6vw, 3rem);
    }

    .text-fluid-xl {
      font-size: clamp(1.1rem, 3vw, 1.5rem);
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      scrollbar-width: none;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect } = React;

    /* ========= フロア意味づけ（体験ベース） ========= */
    const floorMeta = {
      歴史: "過去を知り、今を理解する",
      文化: "手仕事と物語に触れる",
      自然: "生きている環境を感じる",
      平和: "社会と自分の関係を考える",
      生活: "暮らしの中で生きる力を育てる",
      仕事: "社会と関わる準備をする"
    };

    const floors = ["歴史", "文化", "自然", "平和", "生活", "仕事"];

    /* ========= データ ========= */
    const floorData = {
      歴史: {
        title: "歴史", color: "bg-pink-100 border-pink-300", headerColor: "bg-pink-200",
        sections: [
          {
            id: "K4",
            title: "🍠 サツマイモ物語 🍠",
            description: "原産地から日本へ ― 食べ物の世界旅行",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "./rekishi/sweet_potato_history.html"
          },
          {
            id: "H-oldhouse",
            title: "沖縄の古い家探検❗️",
            description: "沖縄の伝統的な家屋の工夫を見てみよう",
            location: "郷土",
            videoId: "QpI0t9jXbwU"
          },
          {
            id: "H-imo",
            title: "お芋のチカラ（多重知能）",
            description: "紅いもを8つの視点（多重知能）で学んでみよう！",
            location: "歴史",
            learningContent: {
              title: "🍠 紅いも × 多重知能（MI）",
              html: `
                <div class="mb-4 text-sm bg-pink-50 p-2 rounded">
                  <p>一つのテーマを「8つの知能（MI）」で広げてみよう。</p>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                  <div class="border p-2 rounded">🎵 <strong>音楽</strong><br>動画でリズムを感じる</div>
                  <div class="border p-2 rounded">🗣 <strong>言語</strong><br>野國總管・儀間真常・徳川吉宗</div>
                  <div class="border p-2 rounded">🏃 <strong>身体</strong><br>芋掘り・調理体験</div>
                  <div class="border p-2 rounded">🔢 <strong>論理</strong><br>栄養素・葉っぱの効能は？</div>
                  <div class="border p-2 rounded">🌿 <strong>博物</strong><br>ポリフェノール・南米原産</div>
                  <div class="border p-2 rounded">💭 <strong>内省</strong><br>食べたことある？どんな味？</div>
                  <div class="border p-2 rounded">🤝 <strong>対人</strong><br>紅いもの魅力を紹介しよう</div>
                  <div class="border p-2 rounded">🎨 <strong>空間</strong><br>花や葉っぱの形・色観察</div>
                </div>
              `
            }
          }
        ]
      },
      文化: {
        title: "文化", color: "bg-green-100 border-green-300", headerColor: "bg-green-200",
        sections: [
          {
            id: "S1",
            title: "読谷やちむんの里 オンライン陶芸鑑賞会",
            description: "自宅でゆっくり、器と手仕事の物語に触れる",
            location: "4C",
            actionType: "modal",
            modalUrl: "./bunka/yachimun.html"
          },
          {
            id: "C-shisa",
            title: "シーサーを作ろう❗️",
            description: "守り神シーサーを粘土で作ってみよう",
            location: "工房",
            videoId: "Nb7Nfb0embU"
          },
          {
            id: "C-sanshin",
            title: "楽器を演奏しよう❗️",
            description: "沖縄の伝統楽器「三線」の音色",
            location: "舞台",
            videoId: "Zm8X3FACbF0"
          },
          {
            id: "C-obon",
            title: "1分でわかる❗️沖縄のお盆❗️",
            description: "ご先祖さまをお迎えする大切な行事",
            location: "行事",
            videoId: "PZ4YPyx3B9I"
          },
          {
            id: "C-mimigusuri",
            title: "歌や耳ぐすり",
            description: "工工四と三線でみんなを楽しませよう",
            location: "舞台",
            isComingSoon: true
          },
          {
            id: "C-ramen",
            title: "🍜 ラーメン学",
            description: "身近なラーメンを「多重知能」で深掘り！",
            location: "食文化",
            learningContent: {
              title: "🍜 ラーメン × 多重知能（MI）",
              html: `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                  <div class="border p-2 rounded">🎵 <strong>音楽</strong><br>発音・すする音（リズム）</div>
                  <div class="border p-2 rounded">🗣 <strong>言語</strong><br>漢字で書いてみよう（拉麺）</div>
                  <div class="border p-2 rounded">🏃 <strong>身体</strong><br>あつあつラーメン作り</div>
                  <div class="border p-2 rounded">🔢 <strong>論理</strong><br>どんな栄養素が入ってる？</div>
                  <div class="border p-2 rounded">🌿 <strong>博物</strong><br>小麦・グルテンの正体</div>
                  <div class="border p-2 rounded">💭 <strong>内省</strong><br>何味が好き？思い出の味</div>
                  <div class="border p-2 rounded">🤝 <strong>対人</strong><br>おすすめのお店を紹介</div>
                  <div class="border p-2 rounded">🎨 <strong>空間</strong><br>器のデザイン・盛り付け</div>
                </div>
              `
            }
          },
          {
            id: "C-ocean",
            title: "🌊 海洋文化館 × MI",
            description: "海をめぐる冒険と知恵",
            location: "海洋博",
            learningContent: {
              title: "🌊 海洋文化館 × 多重知能",
              html: `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                  <div class="border p-2 rounded">🎵 <strong>音楽</strong><br>海洋民族の伝統音楽・海の音</div>
                  <div class="border p-2 rounded">🗣 <strong>言語</strong><br>物語・航海用語</div>
                  <div class="border p-2 rounded">🏃 <strong>身体</strong><br>カヌー操作・ロープワーク</div>
                  <div class="border p-2 rounded">🔢 <strong>論理</strong><br>航海技術・スターナビゲーション</div>
                  <div class="border p-2 rounded">🌿 <strong>博物</strong><br>海洋生物・環境の変化</div>
                  <div class="border p-2 rounded">💭 <strong>内省</strong><br>海と自分・静かな時間</div>
                  <div class="border p-2 rounded">🤝 <strong>対人</strong><br>クルーとの協力・文化交流</div>
                  <div class="border p-2 rounded">🎨 <strong>空間</strong><br>海図・船の設計図</div>
                </div>
              `
            }
          }
        ]
      },
      自然: {
        title: "自然", color: "bg-orange-100 border-orange-300", headerColor: "bg-orange-200",
        sections: [
          {
            id: "G2",
            title: "奇跡の川 塩川",
            description: "世界に2つだけの塩水が湧き出る川",
            location: "本部町",
            videoId: "UbKtWt6jrDw"
          },
          {
            id: "N-goya",
            title: "夏野菜料理〜ゴーヤー編〜",
            description: "旬の野菜をおいしく食べる知恵",
            location: "キッチン",
            videoId: "y7E5pd6Z1_4"
          },
          {
            id: "N-haruser",
            title: "畑（ハルサー）",
            description: "ハルサーしながら土と触れ合おう",
            location: "畑",
            isComingSoon: true
          },
          {
            id: "N-chaganju",
            title: "茶願寿（Chaganju）",
            description: "ミッション達成をしながら沖縄中を綺麗にしよう！",
            location: "ボランティア",
            isComingSoon: true
          },
          {
            id: "N-soil",
            title: "🌍 土（つち）のフシギ",
            description: "足元の「土」にも世界が広がっている",
            location: "自然",
            learningContent: {
              title: "🌍 土 × 多重知能（MI）",
              html: `
                <div class="grid grid-cols-1 md:grid-cols-2 gap-3 text-sm">
                  <div class="border p-2 rounded">🏃 <strong>身体</strong><br>陶芸・泥団子作り</div>
                  <div class="border p-2 rounded">🔢 <strong>論理</strong><br>元素・栄養素の分析</div>
                  <div class="border p-2 rounded">🌿 <strong>博物</strong><br>沖縄の「赤土」問題</div>
                  <div class="border p-2 rounded">🎨 <strong>空間</strong><br>土の色・層の美しさ</div>
                </div>
              `
            }
          },
          {
            id: "N-plane",
            title: "✈️ 紙飛行機工学",
            description: "遠くへ、長く。紙飛行機の科学。",
            location: "実験",
            learningContent: {
              title: "✈️ 紙飛行機 × 多重知能",
              html: `
                <div class="space-y-3 text-sm">
                  <div class="border p-2 rounded bg-purple-50">
                    <strong>🏆 ギネス記録</strong><br>
                    距離: 69.14m (2012)<br>
                    滞空時間: 29.20秒 (2009)
                  </div>
                  <div class="grid grid-cols-2 gap-2">
                    <div class="border p-2 rounded">🗣 <strong>言語</strong><br>へそ・やり・イカ（種類）</div>
                    <div class="border p-2 rounded">🔢 <strong>論理</strong><br>どうすれば飛ぶ？（仮説）</div>
                    <div class="border p-2 rounded">🏃 <strong>身体</strong><br>体全体を使って飛ばす</div>
                    <div class="border p-2 rounded">🤝 <strong>対人</strong><br>誰かと飛ばしあいっこ</div>
                  </div>
                </div>
              `
            }
          }
        ]
      },
      平和: {
        title: "平和", color: "bg-blue-100 border-blue-300", headerColor: "bg-blue-200",
        sections: [
          {
            id: "H5",
            title: "やる気のヒミツ",
            description: "行動のあとに生まれる、やる気の正体",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "./heiwa/yaruki.html"
          }
        ]
      },
      生活: {
        title: "生活",
        color: "bg-yellow-100 border-yellow-300",
        headerColor: "bg-yellow-200",
        sections: [
          {
            id: "L-money-0",
            title: "クレジットカードとの付き合い方",
            description: "お金と安全につきあうための基礎知識",
            location: "お金",
            learningContent: {
              title: "クレジットカードとの付き合い方",
              html: `
                <h3>🦙 アルパカ先生のクレカ講座</h3>
                <strong>⚠️ リボ払いは絶対NG</strong>
                <ul>
                  <li>一括・2回払いを基本に</li>
                  <li>利用額は収入の1/3以内</li>
                  <li>「後払い」であることを理解する</li>
                </ul>
              `
            }
          },
          {
            id: "L-money-1",
            title: "詐欺から身を守ろう！",
            description: "悪徳商法・詐欺の典型パターン",
            location: "お金",
            learningContent: {
              title: "悪徳商法の見分け方",
              html: `
                <ul>
                  <li>「必ず儲かる」は危険</li>
                  <li>友人経由の勧誘に注意</li>
                  <li>高額な初期費用を要求される</li>
                </ul>
                <p>困ったら <strong>消費生活センター（188）</strong></p>
              `
            }
          },
          {
            id: "L-money-3",
            title: "家庭学習が成績になる！",
            description: "家庭・フリースクールの学びが評価される仕組み",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "https://alpaca-school.okinawa/1722582416_d3e0b7a5d8a3c6b1e4b5a0d8c7b6a5d4.html"
          },
          {
            id: "L-money-4",
            title: "COCOLOプランとは？",
            description: "誰一人取り残されない学びの設計",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "https://alpaca-school.okinawa/250802cocolo.html"
          },
          {
            id: "L-money-5",
            title: "楽しく英語学習♪",
            description: "英語の基礎を体験するオンライン教材",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "https://alpaca-school.okinawa/training/english-training.html"
          },
          {
            id: "L-bug",
            title: "虫除けスプレーを作ろう",
            description: "月桃の葉っぱで自然な虫除け",
            location: "生活の知恵",
            isComingSoon: true
          },
          {
            id: "L-snack",
            title: "おやつづくり",
            description: "ちんびんとポーポーを作ろう",
            location: "キッチン",
            isComingSoon: true
          },
          {
            id: "L-cooking",
            title: "沖縄料理を作ってみよう",
            description: "苦味を楽しむゴーヤーチャンプルー",
            location: "キッチン",
            isComingSoon: true
          },
          {
            id: "L-curry",
            title: "カレーの学校",
            description: "スパイスから作る沖縄アーユルヴェーダ",
            location: "キッチン",
            isComingSoon: true
          },
          {
            id: "L-miso",
            title: "味噌作り",
            description: "腸活に！大豆やおからで手作り味噌",
            location: "キッチン",
            isComingSoon: true
          },
          {
            id: "L-mind",
            title: "🗑 「棄てる」と「捨てる」",
            description: "片付けを通して心を整えるヒント",
            location: "メンタル",
            learningContent: {
              title: "🗑 棄てる vs 捨てる",
              html: `
                <div class="space-y-4">
                  <div class="bg-gray-50 p-3 rounded">
                    <h4 class="font-bold">棄てる（すてる）</h4>
                    <p>ほったらかす。うちすてる。</p>
                  </div>
                  <div class="bg-blue-50 p-3 rounded">
                    <h4 class="font-bold">捨てる（すてる）</h4>
                    <p>心に区切りをつけること。始末をつける。</p>
                  </div>
                  <p class="text-center font-bold text-gray-700 mt-4">
                    「片付けて心をすっきりさせて、<br>ごきげんになりましょう」
                  </p>
                  <blockquote class="border-l-4 border-gray-300 pl-4 italic text-sm text-gray-600">
                    人間の最大の罪は「不機嫌」<br>（ゲーテ）
                  </blockquote>
                </div>
              `
            }
          },
          {
            id: "L-support",
            title: "🏫 学びの居場所リスト",
            description: "学校以外の学び場・相談先（南部エリア）",
            location: "リソース",
            learningContent: {
              title: "🏫 学びといやしの居場所",
              html: `
                <div class="space-y-4 text-sm">
                  <div class="border p-3 rounded">
                    <h4 class="font-bold text-blue-600">しののめ教室（八重瀬町）</h4>
                    <p>心因性不登校児童生徒のための適応指導教室。<br>体験活動・相談・学習支援。</p>
                  </div>
                  <div class="border p-3 rounded">
                    <h4 class="font-bold text-blue-600">てるしの（沖縄市）</h4>
                    <p>県立総合教育センター内。小中高生対象。<br>カウンセリングや体験学習。</p>
                  </div>
                  <p class="text-xs text-gray-500">※ 最新の情報は各教育委員会にお問い合わせください。</p>
                </div>
              `
            }
          }
        ]
      },
      仕事: {
        title: "仕事", color: "bg-cyan-100 border-cyan-300", headerColor: "bg-cyan-200",
        sections: [
          {
            id: "W1",
            title: "経営理論の変遷",
            description: "仕事と社会の関係を考える",
            location: "特別展示",
            actionType: "modal",
            modalUrl: "./Research/keiriron-hensei.html"
          },
          {
            id: "W-goen",
            title: "仕事は「ご縁」",
            description: "仕事と人との関係性について学ぶ",
            location: "キャリア",
            learningContent: {
              title: "仕事は誰かとの「ご縁」",
              html: `
                <div class="space-y-4 text-center">
                  <p>誰かに仕事をお願いする<br>誰かから仕事をいただく</p>
                  <p class="font-bold text-cyan-700">仕事を通して人とつながり<br>これまでのご縁に感謝する</p>
                  <p>たくさんのご縁から仕事があり、<br>そのご縁が<br><strong>「未来の仕事」</strong>と<strong>「成長」</strong>と<strong>「人」</strong>との<br>新たなご縁となります。</p>
                  <div class="mt-6 pt-6 border-t border-cyan-100">
                    <p class="text-sm text-gray-600">アルパカツアーをとおして<br>見えなかった素敵な仕事を感じて<br>ご縁あった人から "自分にもできそうなこと" に気づく</p>
                  </div>
                </div>
              `
            }
          },
          {
            id: "W-skills",
            title: "💪 社会人基礎力",
            description: "「前に踏み出す」「考え抜く」「チームで働く」",
            location: "スキル",
            learningContent: {
              title: "💪 社会人基礎力（経産省）",
              html: `
                <div class="space-y-3 text-sm">
                  <div class="flex items-start gap-2">
                    <span class="bg-red-100 text-red-800 px-2 rounded font-bold whitespace-nowrap">アクション</span>
                    <div><strong>前に踏み出す力</strong><br>主体性・働きかけ力・実行力</div>
                  </div>
                  <div class="flex items-start gap-2">
                    <span class="bg-blue-100 text-blue-800 px-2 rounded font-bold whitespace-nowrap">シンキング</span>
                    <div><strong>考え抜く力</strong><br>課題発見力・計画力・創造力</div>
                  </div>
                  <div class="flex items-start gap-2">
                    <span class="bg-green-100 text-green-800 px-2 rounded font-bold whitespace-nowrap">チーム</span>
                    <div><strong>チームで働く力</strong><br>発信力・傾聴力・柔軟性・規律性</div>
                  </div>
                </div>
              `
            }
          },
          {
            id: "W-career",
            title: "🧭 キャリアってなに？",
            description: "「キャリア教育」の定義を知っておこう",
            location: "知識",
            learningContent: {
              title: "🧭 キャリア教育の用語",
              html: `
                 <div class="space-y-4 text-sm">
                   <div class="border p-3 rounded bg-cyan-50">
                     <h4 class="font-bold">キャリア教育</h4>
                     <p>一人一人の社会的・職業的自立に向け、必要な基盤となる能力や態度を育てることを通して、キャリア発達を促す教育</p>
                   </div>
                   <div class="border p-3 rounded bg-cyan-50">
                     <h4 class="font-bold">キャリア発達</h4>
                     <p>社会の中で自分の役割を果たしながら，自分らしい生き方を実現していく過程</p>
                   </div>
                   <p class="text-xs text-right">（文部科学省・中教審答申より）</p>
                 </div>
              `
            }
          }
        ]
      }
    };

    /* ========= Components ========= */

    const Hero = () => (
      <section className="bg-gradient-to-b from-sky-100 to-gray-50">
        <div className="max-w-4xl mx-auto p-8 text-center">
          <h1 className="text-fluid-4xl font-extrabold mb-4">アルパカすく〜る 🦙</h1>
          <p className="text-fluid-xl text-gray-700 leading-relaxed">
            「やってみたい」を、<br />勉強・生活・仕事・社会につながる形で試せる場所。
          </p>
          <p className="mt-4 text-sm text-gray-600 leading-relaxed">
            学ぶ・つくる・つながる。<br />
            子どもから大人まで、沖縄の雑学を学ぶオンライン学び舎。
          </p>
        </div>
      </section>
    );

    const Header = ({ currentFloor, setCurrentFloor, meta, data }) => (
      <header className={`${data.headerColor} sticky top-0 z-10 shadow`}>
        <div className="max-w-4xl mx-auto p-4">
          <h2 className="text-xl font-extrabold">{currentFloor}</h2>
          <p className="text-sm text-gray-700">{meta}</p>
          <div className="flex gap-2 overflow-x-auto no-scrollbar mt-3">
            {floors.map(f => (
              <button key={f}
                onClick={() => setCurrentFloor(f)}
                className={`px-4 py-2 rounded-lg font-bold hover:bg-white transition ${f === currentFloor ? "bg-white" : "bg-white/50"}`}>
                {f}
              </button>
            ))}
          </div>
        </div>
      </header>
    );

    const FloorContent = ({ data, onVideoClick, onModalClick }) => (
      <main className="max-w-4xl mx-auto p-6 grid md:grid-cols-2 gap-4">
        {data.sections.map(s => (
          <div key={s.id} className={`${data.color} border-2 rounded-xl p-6 shadow`}>
            <h3 className="font-bold text-lg mb-2">{s.title}</h3>
            <p className="text-sm text-gray-700 mb-4">{s.description}</p>
            {s.videoId && (
              <button onClick={() => onVideoClick(s.videoId)}
                className="bg-red-500 text-white px-3 py-2 rounded font-bold hover:bg-red-600 transition">
                動画を見る
              </button>
            )}
            {(s.actionType === "modal" || s.learningContent) && (
              <button onClick={() => onModalClick(s)}
                className="bg-purple-500 text-white px-3 py-2 rounded font-bold ml-2 hover:bg-purple-600 transition">
                学ぶ
              </button>
            )}
            {s.isComingSoon && (
              <button disabled
                className="bg-gray-300 text-gray-500 px-3 py-2 rounded font-bold ml-2 cursor-not-allowed">
                Coming Soon
              </button>
            )}
          </div>
        ))}
      </main>
    );

    const Footer = () => (
      <>
        <section className="max-w-4xl mx-auto p-6">
          <div className="bg-white border-2 border-dashed rounded-xl p-6 text-center">
            <h3 className="font-bold text-lg mb-2">学んだことを、次の一歩へ</h3>
            <p className="text-sm text-gray-600 mb-2">
              体験したことは、表現を通して社会とつながっていきます。
            </p>
            <a href="https://furima.ryukyu-tane.com"
              target="_blank"
              rel="noopener noreferrer"
              className="bg-emerald-500 text-white px-4 py-2 rounded-lg font-bold hover:bg-emerald-600 transition inline-block">
              文芸フリマで表現してみる
            </a>
          </div>
        </section >

        <section className="max-w-4xl mx-auto p-6">
          <div className="bg-white border-2 border-dashed border-gray-200 rounded-xl p-8 text-center">
            <p className="mb-4 text-gray-700">
              学びの中で使った教材や記録をまとめています。
            </p>
            <a href="universe.html"
              className="inline-block px-6 py-2 bg-blue-50 text-blue-900 rounded-full font-bold hover:bg-blue-100 transition">
              てぃあんだぁクラブ universe
            </a>
          </div>
        </section>

        <footer className="bg-gray-800 text-white p-6 text-sm">
          <div className="max-w-4xl mx-auto">
            <p>
              仕事は、誰かとのご縁。<br />
              アルパカすく〜るは、その入口をつくります。
              <br />
              このコンテンツは、ご自宅から快適に学習できるよう設計されています。車椅子をご利用の方、高齢の方、外出が難しい方など、すべての方が楽しめるよう善処します。
            </p>
            <a
              href="./concept.html"
              className="inline-block mt-2 underline hover:text-emerald-300"
            >
              ▶ この学びの設計思想を読む
            </a>
          </div>
        </footer>
      </>
    );

    const VideoModal = ({ videoId, onClose }) => (
      <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4" onClick={onClose}>
        <div className="relative w-full max-w-4xl">
          <button
            onClick={onClose}
            className="absolute -top-10 right-0 text-white hover:text-gray-300 text-sm font-bold"
            aria-label="閉じる">
            ✕ 閉じる (ESC)
          </button>
          <iframe
            key={videoId}
            src={`https://www.youtube.com/embed/${videoId}?rel=0&modestbranding=1&playsinline=1`}
            title="YouTube video player"
            className="w-full aspect-video rounded-lg"
            onClick={(e) => e.stopPropagation()}
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            referrerPolicy="strict-origin-when-cross-origin"
            allowFullScreen
          />
        </div>
      </div>
    );

    const ContentModal = ({ content, onClose }) => (
      <div className="fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4" onClick={onClose}>
        <div className="relative w-full max-w-4xl h-5/6">
          <button
            onClick={onClose}
            className="absolute -top-10 right-0 text-white hover:text-gray-300 text-sm font-bold"
            aria-label="閉じる">
            ✕ 閉じる (ESC)
          </button>
          {content.modalUrl ? (
            <iframe
              src={content.modalUrl}
              className="w-full h-full rounded-lg bg-white"
              onClick={(e) => e.stopPropagation()}
            />
          ) : content.learningContent ? (
            <div
              className="w-full h-full rounded-lg bg-white p-8 overflow-y-auto"
              onClick={(e) => e.stopPropagation()}>
              <h3 className="text-2xl font-bold mb-4">{content.learningContent.title}</h3>
              <div dangerouslySetInnerHTML={{ __html: content.learningContent.html }} />
            </div>
          ) : null}
        </div>
      </div>
    );

    function App() {
      const [currentFloor, setCurrentFloor] = useState("歴史");
      const [videoUrl, setVideoUrl] = useState(null);
      const [modal, setModal] = useState(null);

      useEffect(() => { lucide.createIcons(); }, [currentFloor, videoUrl, modal]);

      useEffect(() => {
        const handleEsc = (e) => {
          if (e.key === 'Escape') {
            setVideoUrl(null);
            setModal(null);
          }
        };
        window.addEventListener('keydown', handleEsc);
        return () => window.removeEventListener('keydown', handleEsc);
      }, []);

      const data = floorData[currentFloor];

      return (
        <div className="min-h-screen bg-gray-50">
          <Hero />

          <Header
            currentFloor={currentFloor}
            setCurrentFloor={setCurrentFloor}
            meta={floorMeta[currentFloor]}
            data={data}
          />

          <FloorContent
            data={data}
            onVideoClick={setVideoUrl}
            onModalClick={setModal}
          />

          <Footer />

          {videoUrl && <VideoModal videoId={videoUrl} onClose={() => setVideoUrl(null)} />}
          {modal && <ContentModal content={modal} onClose={() => setModal(null)} />}
        </div>
      );
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>

</html>