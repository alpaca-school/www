<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å–œåç•ªæ‰€ã‚’å­¦ã¼ã†ï¼ğŸ¯</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        :root {
            --primary: #FF6B35; --secondary: #F7931E; --accent: #4ECDC4;
            --dark: #2C3E50; --light: #FFF8F0; --shadow: rgba(0, 0, 0, 0.1);
        }
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: linear-gradient(135deg, #FFE66D 0%, #A8E063 100%);
            overflow: hidden; height: 100dvh; -webkit-text-size-adjust: 100%;
        }
        /* --- é‰„å£ã®ãƒ«ãƒ“æ”¹è¡Œå¯¾ç­– --- */
        ruby {
            display: inline-block; /* ç†Ÿèªã‚’ã²ã¨å¡Šã«ã™ã‚‹ */
            white-space: nowrap;  /* ç†Ÿèªå†…ã§ã®æ”¹è¡Œã‚’ç¦æ­¢ */
            ruby-align: center;
            vertical-align: bottom;
        }
        rt { font-size: 0.55em; line-height: 1.1; display: block; margin-bottom: 1px; }

        .container { height: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 10px; }
        .slide {
            background: var(--light); border-radius: 30px; padding: 30px 15px; 
            width: 100%; max-width: 900px; max-height: calc(100dvh - 110px);
            overflow-y: auto; position: relative; box-shadow: 0 20px 40px rgba(0,0,0,0.2);
            -webkit-overflow-scrolling: touch;
        }
        .slide-content { display: none; }
        .slide-content.active { display: block; animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        h1 { font-family: 'Zen Maru Gothic', serif; font-size: 1.8em; color: var(--primary); text-align: center; margin-bottom: 20px; font-weight: 900; text-shadow: 2px 2px 0 var(--secondary); line-height: 1.3; }
        h2 { font-family: 'Zen Maru Gothic', serif; font-size: 1.55em; color: var(--primary); margin: 15px 0; font-weight: 800; line-height: 1.4; }
        h3 { font-size: 1.2em; color: var(--dark); margin: 20px 0 10px; font-weight: 700; }
        p, li { font-size: 1.05em; line-height: 1.8; color: var(--dark); margin-bottom: 12px; }
        .emoji-large { font-size: 3.5em; text-align: center; margin: 10px 0; animation: bounce 2s infinite; }
        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }
        .info-box { background: linear-gradient(135deg, #FFE66D 0%, #A8E063 100%); padding: 18px; border-radius: 20px; margin: 15px 0; }
        .timeline { background: white; border-left: 5px solid var(--accent); padding: 15px; margin: 15px 0; border-radius: 10px; }
        .timeline-item { margin-bottom: 12px; padding-left: 20px; position: relative; font-size: 0.95em; }
        .timeline-item::before { content: 'ğŸ“'; position: absolute; left: -14px; font-size: 1.2em; }
        
        /* ã‚¯ã‚¤ã‚º */
        .quiz-option { background: white; border: 3px solid var(--accent); padding: 15px; margin: 10px 0; border-radius: 15px; cursor: pointer; display: flex; align-items: center; gap: 10px; }
        .quiz-option.correct { background: #d4edda !important; border-color: #28a745 !important; }
        .quiz-option.incorrect { background: #f8d7da !important; border-color: #dc3545 !important; }
        .quiz-option.disabled { pointer-events: none; opacity: 0.7; }
        .answer-reveal { background: #fff3cd; border: 3px solid #ffc107; padding: 15px; margin: 15px 0; border-radius: 15px; display: none; }
        .answer-reveal.show { display: block; animation: slideDown 0.4s ease-out; }
        @keyframes slideDown { from { opacity: 0; max-height: 0; } to { opacity: 1; max-height: 1200px; } }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .navigation { display: flex; justify-content: space-between; width: 100%; max-width: 900px; margin-top: 15px; gap: 10px; }
        button { background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%); color: white; border: none; padding: 15px 10px; font-size: 1em; border-radius: 50px; cursor: pointer; font-weight: 700; flex: 1; box-shadow: 0 4px 10px rgba(255,107,53,0.3); }
        button:disabled { opacity: 0.3; }

        /* ã‚°ãƒªãƒƒãƒ‰ãƒ»ãƒ†ãƒ¼ãƒ–ãƒ« */
        .feature-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .feature-card { background: white; padding: 12px; border-radius: 15px; text-align: center; box-shadow: 0 4px 8px var(--shadow); font-size: 0.85em; }
        .table-wrap { width: 100%; overflow-x: auto; margin: 15px 0; }
        table { width: 100%; min-width: 450px; border-collapse: separate; border-spacing: 0 8px; }
        th, td { padding: 10px; font-size: 0.85em; }
        th { background: var(--primary); color: white; border-radius: 5px; }
        tr { background: white; box-shadow: 0 2px 5px var(--shadow); }

        /* å¹´è¡¨ã‚²ãƒ¼ãƒ  */
        .timeline-item-game { background: white; border: 3px solid var(--accent); padding: 12px; border-radius: 12px; margin-bottom: 8px; display: flex; align-items: center; gap: 12px; }
        .timeline-item-game.selected { border-color: var(--primary); background: #fff5f0; }
        .timeline-item-game.correct { background: #d4edda; border-color: #28a745; }
        .timeline-item-game.incorrect { background: #f8d7da; border-color: #dc3545; }
        .timeline-item-game .number { background: var(--accent); color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0; }
        
        .highlight { background: linear-gradient(transparent 60%, #FFE66D 60%); font-weight: bold; }
        .progress { text-align: center; margin-top: 10px; font-size: 0.85em; font-weight: bold; color: var(--dark); }
        ul li { list-style: none; padding-left: 20px; position: relative; margin-bottom: 10px; }
        ul li::before { content: 'âœ¨'; position: absolute; left: 0; }
    </style>
</head>
<body>
    <div class="container">
        <div class="slide" id="slideBox">
            <div class="slide-content active" data-slide="0">
                <h1>ğŸ¯ å–œåç•ªæ‰€ã‚’å­¦ã¼ã†ï¼ ğŸŒº</h1>
                <div class="emoji-large">ğŸ›ï¸</div>
                <div class="info-box">
                    <h2>ğŸ“š ã“ã®å­¦ç¿’ã‚µã‚¤ãƒˆã«ã¤ã„ã¦</h2>
                    <p>æ²–ç¸„ã®æ­´å²ã‚ã‚‹å»ºç‰©ã€Œå–œåç•ªæ‰€ã€ã«ã¤ã„ã¦ã€æ¥½ã—ãå­¦ã¹ã‚‹ã‚ˆï¼</p>
                    <p>âœ¨ ã‚¹ãƒ©ã‚¤ãƒ‰ã‚’é€²ã‚ãªãŒã‚‰èª­ã‚“ã§ã€æœ€å¾Œã«ã‚¯ã‚¤ã‚ºã«<ruby>æŒ‘æˆ¦<rt>ã¡ã‚‡ã†ã›ã‚“</rt></ruby>ã—ã‚ˆã†ï¼</p>
                </div>
                <div class="feature-grid">
                    <div class="feature-card"><div class="emoji" style="font-size:2em;">ğŸ¯</div><p>å…¨17ã‚¹ãƒ©ã‚¤ãƒ‰</p></div>
                    <div class="feature-card"><div class="emoji" style="font-size:2em;">â“</div><p>ã‚¯ã‚¤ã‚º4å•</p></div>
                </div>
            </div>

            <div class="slide-content" data-slide="1">
                <h2>ğŸ›ï¸ å–œåç•ªæ‰€ã£ã¦ãªã«ï¼Ÿ</h2>
                <div class="emoji-large">ğŸ¯</div>
                <div class="info-box">
                    <p><strong>å–œåç•ªæ‰€ï¼ˆããªã°ã‚“ã˜ã‚‡ï¼‰</strong>ã¯ã€æ²–ç¸„çœŒã®èª­è°·æ‘ã«ã‚ã‚‹ã€æ˜”ã®å½¹å ´ã‚’<ruby>å†ç¾<rt>ã•ã„ã’ã‚“</rt></ruby>ã—ãŸå»ºç‰©ã ã‚ˆã€‚</p>
                    <p>ä»Šã¯<span class="highlight">ã€Œé“ã®<ruby>é§…<rt>ãˆã</rt></ruby>ã€</span>ã¨ã—ã¦ã€å¤šãã®äººãŒ<ruby>è¨ª<rt>ãŠã¨ãš</rt></ruby>ã‚Œã‚‹ã‚“ã ï¼</p>
                </div>
            </div>

            <div class="slide-content" data-slide="2">
                <h2>â° ã„ã¤å»ºã¦ã‚‰ã‚ŒãŸã®ï¼Ÿ</h2>
                <div class="emoji-large">ğŸ“…</div>
                <div class="info-box">
                    <p>ä»Šã‹ã‚‰ç´„<span class="highlight">270å¹´å‰ã®1753å¹´ã”ã‚</span>ã«å»ºã¦ã‚‰ã‚ŒãŸã¨è€ƒãˆã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã€‚</p>
                </div>
                <div class="timeline">
                    <div class="timeline-item"><strong>1753å¹´ã”ã‚</strong> æœ€åˆã®ç•ªæ‰€ãŒå®Œæˆ</div>
                    <div class="timeline-item"><strong>1945å¹´</strong> æˆ¦äº‰ã§<ruby>ç„¼å¤±<rt>ã—ã‚‡ã†ã—ã¤</rt></ruby> ğŸ˜¢</div>
                    <div class="timeline-item"><strong>2005å¹´</strong> <ruby>å†å»º<rt>ã•ã„ã‘ã‚“</rt></ruby>ã•ã‚ŒãŸï¼ ğŸ‰</div>
                </div>
            </div>

            <div class="slide-content" data-slide="3">
                <h2>ğŸ’¼ ã©ã‚“ãªå½¹å‰²ãŒã‚ã£ãŸã®ï¼Ÿ</h2>
                <div class="emoji-large">ğŸ¢</div>
                <p>å–œåç•ªæ‰€ã¯ã€<ruby>ç‰çƒ<rt>ã‚Šã‚…ã†ãã‚…ã†</rt></ruby><ruby>ç‹å›½<rt>ãŠã†ã“ã</rt></ruby>æ™‚ä»£ã®å½¹æ‰€ã ã£ãŸã‚“ã ã€‚</p>
                <ul>
                    <li>æ‘ã®<ruby>æ”¿æ²»<rt>ã›ã„ã˜</rt></ruby>ã‚„<ruby>è¡Œæ”¿<rt>ãã‚‡ã†ã›ã„</rt></ruby>ã‚’è¡Œã†å ´æ‰€</li>
                    <li>æ—…äººãŒä¼‘ã‚€å ´æ‰€</li>
                </ul>
            </div>

            <div class="slide-content" data-slide="4">
                <h2>âš“ ãƒšãƒªãƒ¼<ruby>æç£<rt>ã¦ã„ã¨ã</rt></ruby>ãŒã‚„ã£ã¦ããŸï¼</h2>
                <div class="emoji-large">ğŸš¢</div>
                <div class="info-box">
                    <h3>ğŸŒŸ ãƒšãƒªãƒ¼<ruby>æç£<rt>ã¦ã„ã¨ã</rt></ruby>ã£ã¦èª°ï¼Ÿ</h3>
                    <p>ãƒã‚·ãƒ¥ãƒ¼ãƒ»ãƒšãƒªãƒ¼ã¯ã‚¢ãƒ¡ãƒªã‚«ã®å‰ã„äººã€‚æ—¥æœ¬ã‚’<ruby>é–‹å›½<rt>ã‹ã„ã“ã</rt></ruby>ã•ã›ã‚‹ãŸã‚ã«ã‚„ã£ã¦ããŸã‚“ã ã€‚</p>
                </div>
                <div class="timeline">
                    <div class="timeline-item"><strong>1853å¹´6æœˆ6æ—¥</strong> å–œåç•ªæ‰€ã‚’<ruby>è¨ª<rt>ãŠã¨ãš</rt></ruby>ã‚ŒãŸ</div>
                </div>
            </div>

            <div class="slide-content" data-slide="4-2">
                <h2>ğŸš¢ ãƒšãƒªãƒ¼ã¯ãã®å¾Œã©ã†ã—ãŸã®ï¼Ÿ</h2>
                <div class="emoji-large">ğŸ“œ</div>
                <p>ãƒšãƒªãƒ¼ã¯<ruby>æµ¦è³€<rt>ã†ã‚‰ãŒ</rt></ruby>ã«é»’ã„èˆ¹ã§ã‚„ã£ã¦ãã¦ã€æ—¥æœ¬ã«æ‰‹ç´™ã‚’æ¸¡ã—ãŸã‚ˆã€‚</p>
                <div class="timeline">
                    <div class="timeline-item"><strong>1854å¹´3æœˆ</strong> <span class="highlight">æ—¥ç±³å’Œè¦ª<ruby>æ¡ç´„<rt>ã˜ã‚‡ã†ã‚„ã</rt></ruby></span>ã‚’çµã‚“ã </div>
                    <div class="timeline-item"><strong>1854å¹´7æœˆ</strong> ç‰çƒã¨ã‚‚<ruby>æ¡ç´„<rt>ã˜ã‚‡ã†ã‚„ã</rt></ruby>ã‚’çµã‚“ã </div>
                </div>
            </div>

            <div class="slide-content" data-slide="5">
                <h2>ğŸ“ å–œåç•ªæ‰€ã®ã¸ã‚“ã›ã‚“</h2>
                <div class="table-wrap">
                    <table>
                        <thead><tr><th>æ™‚ä»£</th><th>åå‰</th><th>å¹´</th></tr></thead>
                        <tbody>
                            <tr><td>ç‰çƒç‹å›½æ™‚ä»£</td><td>èª­è°·å±±é–“åˆ‡ç•ªæ‰€</td><td>1753å¹´ã€œ</td></tr>
                            <tr><td>æ˜æ²»æ™‚ä»£</td><td>èª­è°·å±±æ‘å½¹å ´</td><td>1908å¹´ã€œ</td></tr>
                            <tr><td>å¹³æˆæ™‚ä»£</td><td>é“ã®é§…</td><td>2006å¹´ã€œ</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="slide-content" data-slide="6">
                <h2>ğŸ—ï¸ å»ºç‰©ã®ç‰¹ã¡ã‚‡ã†</h2>
                <div class="emoji-large">ğŸ¨</div>
                <ul>
                    <li><strong><ruby>ç°è‰²<rt>ã¯ã„ã„ã‚</rt></ruby>ã®ç“¦</strong>ï¼ˆã‹ã‚ã‚‰ï¼‰ã‚’ä½¿ç”¨</li>
                    <li><strong>ããã‚’ä½¿ã‚ãªã„</strong><ruby>ä¼çµ±çš„<rt>ã§ã‚“ã¨ã†ã¦ã</rt></ruby>ãªå·¥æ³•</li>
                    <li>æŸ±ã«ã¯<strong>ãƒãƒ£ãƒ¼ã‚®</strong>ã®æœ¨ã‚’ä½¿ç”¨</li>
                </ul>
            </div>

            <div class="slide-content" data-slide="7">
                <h2>ğŸª ã©ã‚“ãªæ–½è¨­ï¼Ÿ</h2>
                <div class="feature-grid">
                    <div class="feature-card"><div class="emoji" style="font-size:2em;">âœ…</div><p>è¦³å…‰æ¡ˆå†…æ‰€<br>ãƒˆã‚¤ãƒ¬ãƒ»é§è»Šå ´</p></div>
                    <div class="feature-card"><div class="emoji" style="font-size:2em;">âŒ</div><p>ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³<br>ãŠåœŸç”£å±‹ã•ã‚“</p></div>
                </div>
                <p>æ­´å²ã‚’æ„Ÿã˜ã‚‹ãŸã‚ã®ç‰¹åˆ¥ãªå ´æ‰€ãªã‚“ã ï¼</p>
            </div>

            <div class="slide-content" data-slide="8">
                <h2>ğŸ“š å–œåç•ªæ‰€ã§å­¦ã¹ã‚‹ã“ã¨</h2>
                <div class="info-box">
                    ã‚¬ã‚¤ãƒ‰ã®<ruby>æ¡ˆå†…äºº<rt>ã‚ã‚“ãªã„ã«ã‚“</rt></ruby>ã•ã‚“ãŒã€èª­è°·ã®æ­´å²ã‚’å„ªã—ãæ•™ãˆã¦ãã‚Œã‚‹ã‚ˆï¼
                </div>
            </div>

            <div class="slide-content" data-slide="9-2">
                <h2>ğŸ® å¹´è¡¨ä¸¦ã¹æ›¿ãˆã‚²ãƒ¼ãƒ </h2>
                <div id="timeline-game">
                    <p>é …ç›®ã‚’ã‚¿ãƒƒãƒ—ã—ã¦å…¥ã‚Œæ›¿ãˆã€æ­£ã—ã„é †ï¼ˆæ˜”â†’ä»Šï¼‰ã«ä¸¦ã¹ã‚ˆã†ï¼</p>
                    <div id="timeline-items" style="margin-top:15px;"></div>
                    <button onclick="checkTimelineAnswer()" style="width:100%; margin-top:10px;">ç­”ãˆåˆã‚ã› âœ¨</button>
                </div>
                <div id="timeline-result" class="answer-reveal">
                    <h3 id="timeline-feedback"></h3>
                    <p id="timeline-explanation"></p>
                </div>
            </div>

            <div class="slide-content" data-slide="9">
                <h2>ğŸ“ ã¾ã¨ã‚</h2>
                <p>å–œåç•ªæ‰€ã¯ã€æ²–ç¸„ã®æ­´å²ãŒã¤ã¾ã£ãŸå¤§åˆ‡ãªå ´æ‰€ã€‚ãœã²ä¸€åº¦<ruby>è¨ª<rt>ãŠã¨ãš</rt></ruby>ã‚Œã¦ã¿ã¦ã­ï¼</p>
            </div>

            <div class="slide-content" data-slide="10">
                <h2>â“ ã‚¯ã‚¤ã‚º1</h2>
                <div class="info-box"><h3>æ˜”ã€ä½•ã®å½¹å‰²ã‚’æŒã£ã¦ã„ã¾ã—ãŸã‹ï¼Ÿ</h3></div>
                <div class="quiz-option" data-answer="correct"><span>ğŸ¢</span> æ‘ã®æ”¿æ²»ã‚’è¡Œã†å½¹æ‰€</div>
                <div class="quiz-option" data-answer="incorrect"><span>ğŸª</span> é“å…·ã‚’å£²ã‚‹ãŠåº—</div>
                <div class="answer-reveal"><h3>ğŸ’¡ æ­£è§£ï¼šå½¹æ‰€</h3><p>ä»Šã®å½¹å ´ã®ã‚ˆã†ãªå ´æ‰€ã ã£ãŸã‚“ã ã‚ˆã€‚</p></div>
            </div>

            <div class="slide-content" data-slide="11">
                <h2>â“ ã‚¯ã‚¤ã‚º2</h2>
                <div class="info-box"><h3>ãƒšãƒªãƒ¼ãŒæ¥ãŸã®ã¯ã€ä»Šã‹ã‚‰ä½•å¹´å‰ï¼Ÿ</h3></div>
                <div class="quiz-option" data-answer="correct"><span>ğŸ“…</span> ç´„170å¹´å‰</div>
                <div class="quiz-option" data-answer="incorrect"><span>ğŸ“…</span> ç´„300å¹´å‰</div>
                <div class="answer-reveal"><h3>ğŸ’¡ æ­£è§£ï¼šç´„170å¹´å‰</h3><p>1853å¹´ã«ã‚„ã£ã¦ããŸã‚ˆï¼</p></div>
            </div>

            <div class="slide-content" data-slide="12">
                <h2>â“ ã‚¯ã‚¤ã‚º3</h2>
                <div class="info-box"><h3>ä»Šã®å»ºç‰©ã«å£²åº—ãŒãªã„ã®ã¯ãªãœï¼Ÿ</h3></div>
                <div class="quiz-option" data-answer="correct"><span>ğŸ›ï¸</span> æ­´å²ã‚’å­¦ã¶å ´æ‰€ã ã‹ã‚‰</div>
                <div class="quiz-option" data-answer="incorrect"><span>ğŸ‘·</span> å·¥äº‹ä¸­ã ã‹ã‚‰</div>
                <div class="answer-reveal"><h3>ğŸ’¡ æ­£è§£ï¼šæ­´å²ã‚’å­¦ã¶å ´æ‰€ã ã‹ã‚‰</h3><p>å½“æ™‚ã®é›°å›²æ°—ã‚’å®ˆã£ã¦ã„ã‚‹ã‚“ã ã€‚</p></div>
            </div>

            <div class="slide-content" data-slide="13">
                <h2>â“ ã‚¯ã‚¤ã‚º4</h2>
                <div class="info-box"><h3>å»ºç‰©ã®ã™ã”ã„ç‰¹ã¡ã‚‡ã†ã¯ã©ã‚Œï¼Ÿ</h3></div>
                <div class="quiz-option" data-answer="correct"><span>ğŸ¨</span> ããã‚’ä½¿ã£ã¦ã„ãªã„</div>
                <div class="quiz-option" data-answer="incorrect"><span>ğŸ—ï¸</span> ã‚³ãƒ³ã‚¯ãƒªãƒ¼ãƒˆè£½</div>
                <div class="answer-reveal"><h3>ğŸ’¡ æ­£è§£ï¼šããã‚’ä½¿ã£ã¦ã„ãªã„</h3><p>ä¼çµ±ã®æŠ€ã§ä½œã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆï¼</p></div>
            </div>

            <div class="slide-content" data-slide="14">
                <h1>ğŸ‰ ãŠã‚ã§ã¨ã†ï¼ ğŸ†</h1>
                <div class="emoji-large">ğŸŠ</div>
                <div class="info-box">
                    <h3>ğŸ“š å¾©ç¿’ãƒã‚¤ãƒ³ãƒˆ</h3>
                    <p>ãƒ»ç´„270å¹´ã®æ­´å²ãŒã‚ã‚‹<br>ãƒ»ãƒšãƒªãƒ¼ã‚‚è¨ªã‚ŒãŸé‡è¦ãªå ´æ‰€<br>ãƒ»ä¼çµ±æŠ€è¡“ã§å†å»ºã•ã‚ŒãŸ</p>
                </div>
                <p>ã“ã‚Œã§å›ã‚‚å–œåç•ªæ‰€åšå£«ã ã­ï¼âœ¨</p>
                <button onclick="showSlide(0)" style="width:100%; margin-top:15px;">æœ€åˆã«æˆ»ã‚‹ ğŸ”„</button>
            </div>
        </div>

        <div class="navigation">
            <button id="prevBtn" onclick="changeSlide(-1)">â¬…ï¸ å‰ã¸</button>
            <button id="nextBtn" onclick="changeSlide(1)">æ¬¡ã¸ â¡ï¸</button>
        </div>
        <div class="progress" id="progress">1 / 17</div>
    </div>

    <script>
        let currentSlide = 0;
        const slides = document.querySelectorAll('.slide-content');
        const totalSlides = slides.length;
        let selectedItem = null;

        const timelineEvents = [
            { id: 1, year: "1753å¹´", event: "å–œåç•ªæ‰€ãŒå®Œæˆ", order: 1 },
            { id: 2, year: "1853å¹´", event: "ãƒšãƒªãƒ¼ãŒæ¥è¨ª", order: 2 },
            { id: 3, year: "1945å¹´", event: "æˆ¦äº‰ã§ç„¼å¤±", order: 3 },
            { id: 4, year: "2005å¹´", event: "å†å»ºã•ã‚ŒãŸ", order: 4 }
        ];

        function initTimelineGame() {
            const container = document.getElementById('timeline-items');
            container.innerHTML = '';
            [...timelineEvents].sort(() => Math.random() - 0.5).forEach((item, idx) => {
                const div = document.createElement('div');
                div.className = 'timeline-item-game';
                div.dataset.id = item.id;
                div.innerHTML = `<div class="number">${idx+1}</div><div><strong>${item.year}</strong>: ${item.event}</div>`;
                div.onclick = function() {
                    if (this.classList.contains('correct')) return;
                    if (!selectedItem) {
                        selectedItem = this;
                        this.classList.add('selected');
                    } else {
                        const items = [...container.children];
                        const fromIdx = items.indexOf(selectedItem);
                        const toIdx = items.indexOf(this);
                        if (fromIdx < toIdx) this.after(selectedItem);
                        else this.before(selectedItem);
                        selectedItem.classList.remove('selected');
                        selectedItem = null;
                        updateNumbers();
                    }
                };
                container.appendChild(div);
            });
        }

        function updateNumbers() {
            document.querySelectorAll('.timeline-item-game .number').forEach((n, i) => n.innerText = i + 1);
        }

        function checkTimelineAnswer() {
            const items = document.querySelectorAll('.timeline-item-game');
            let correct = 0;
            items.forEach((item, i) => {
                const ev = timelineEvents.find(e => e.id == item.dataset.id);
                if (ev.order === i + 1) { item.classList.add('correct'); correct++; }
                else item.classList.add('incorrect');
            });
            document.getElementById('timeline-result').classList.add('show');
            document.getElementById('timeline-feedback').innerText = correct === 4 ? "ğŸ‰ å…¨å•æ­£è§£ï¼" : "ğŸ’ª ä¸¦ã³æ›¿ãˆã¦ã¿ã¦ã­ï¼";
            document.getElementById('timeline-explanation').innerText = "1753å¹´å®Œæˆ â†’ 1853å¹´ãƒšãƒªãƒ¼ â†’ 1945å¹´ç„¼å¤± â†’ 2005å¹´å†å»º ã®é †ã ã‚ˆã€‚";
        }

        function showSlide(n) {
            slides.forEach((s, i) => s.classList.toggle('active', i === n));
            currentSlide = n;
            document.getElementById('prevBtn').disabled = n === 0;
            document.getElementById('nextBtn').style.display = (n === totalSlides - 1) ? 'none' : 'block';
            document.getElementById('progress').innerText = `${n + 1} / ${totalSlides}`;
            if (slides[n].dataset.slide === "9-2") initTimelineGame();
            document.getElementById('slideBox').scrollTop = 0;
        }

        function changeSlide(d) {
            if (currentSlide + d >= 0 && currentSlide + d < slides.length) showSlide(currentSlide + d);
        }

        document.querySelectorAll('.quiz-option').forEach(opt => {
            opt.addEventListener('click', function() {
                const parent = this.closest('.slide-content');
                parent.querySelectorAll('.quiz-option').forEach(o => o.classList.add('disabled'));
                this.classList.add(this.dataset.answer);
                parent.querySelector('.answer-reveal').classList.add('show');
            });
        });

        showSlide(0);
    </script>
</body>
</html>
