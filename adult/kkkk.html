<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>å–œåç•ªæ‰€ï¼šå¤šå±¤çš„æ­´å²è€ƒå¯Ÿã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</title>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Maru+Gothic:wght@400;700;900&family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; touch-action: manipulation; }

        :root {
            --primary: #FF6B35; --secondary: #F7931E; --accent: #4ECDC4;
            --dark: #2C3E50; --light: #FFF8F0; --academic: #E5E7EB;
        }

        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            background: #f0f0f0;
            overflow: hidden; 
            height: 100dvh;
            -webkit-text-size-adjust: 100%;
        }

        /* --- é‰„å£ã®ãƒ«ãƒ“è¨­å®šï¼ˆæ¼¢å­—ã®ä¸Šã«å›ºå®šï¼‰ --- */
        ruby {
            display: inline-block;
            white-space: nowrap;
            ruby-position: over;
            -webkit-ruby-position: before;
            text-align: center;
        }
        rt { font-size: 0.55em; line-height: 1; display: block; margin-bottom: 2px; }

        .app-container {
            height: 100%;
            display: flex;
            flex-direction: column;
            background: linear-gradient(135deg, #FFE66D 0%, #A8E063 100%);
            padding: 10px;
        }

        /* ãƒ¢ãƒ¼ãƒ‰é¸æŠç”»é¢ */
        #mode-screen {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 10px;
            z-index: 10;
        }

        .mode-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            width: 100%;
            max-width: 400px;
        }

        .mode-btn {
            background: white; border: 3px solid var(--accent); padding: 15px 5px;
            border-radius: 15px; cursor: pointer; font-weight: 800; text-align: center;
            font-size: 0.9em; transition: 0.2s;
        }
        .mode-btn span { display: block; font-size: 0.7em; font-weight: 400; color: #666; }
        .mode-btn:active { background: var(--accent); color: white; }

        /* ãƒ¡ã‚¤ãƒ³ãƒ“ãƒ¥ãƒ¼ */
        #main-view {
            display: none;
            flex: 1;
            background: var(--light);
            border-radius: 25px;
            padding: 20px;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            position: relative;
            z-index: 1;
        }

        h1#content-title { font-family: 'Zen Maru Gothic', serif; color: var(--primary); font-size: 1.4em; margin-bottom: 15px; border-bottom: 3px solid var(--accent); }

        .interactive-panel {
            background: white; border-radius: 15px; padding: 15px; margin: 15px 0;
            border: 2px solid var(--academic);
        }

        /* å»ºç¯‰ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ç”¨ */
        .building-canvas {
            width: 100%; height: 100px; background: #eee; margin-top: 10px;
            display: flex; align-items: flex-end; justify-content: center; gap: 8px;
            border-radius: 10px; overflow: hidden;
        }
        .bar { width: 40px; background: var(--secondary); transition: 0.5s ease-out; }

        /* ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ */
        .nav-bar {
            display: flex; justify-content: space-between; gap: 10px; margin-top: 15px;
            padding-bottom: 10px;
        }
        .nav-btn {
            background: var(--dark); color: white; border: none; padding: 15px;
            border-radius: 50px; flex: 1; font-weight: 700; cursor: pointer;
            z-index: 20;
        }
        .nav-btn:active { opacity: 0.7; }
        #back-home { background: var(--secondary); margin-bottom: 15px; width: 100%; display: block; }

        .hidden { display: none; }
    </style>
</head>
<body>

<div class="app-container">
    <div id="mode-screen">
        <h1 style="color: var(--dark); font-weight: 900; margin-bottom: 20px; text-align: center;">ğŸ¯ <ruby>å–œåç•ªæ‰€<rt>ããªã°ã‚“ã˜ã‚‡</rt></ruby><br>ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</h1>
        <div class="mode-grid">
            <button class="mode-btn" onclick="setMode('easy')">ã‚„ã•ã—ã„<span>ãµã‚ŠãŒãªå¤šã‚</span></button>
            <button class="mode-btn" onclick="setMode('normal')">ãµã¤ã†<span>æ¨™æº–è§£èª¬</span></button>
            <button class="mode-btn" onclick="setMode('real')">ãƒªã‚¢ãƒ«<span>å°‚é–€å®¶ãƒ¬ãƒ™ãƒ«</span></button>
            <button class="mode-btn" onclick="setMode('undergrad')">å­¦éƒ¨ç”Ÿ<span>å­¦è¡“åŸºç¤</span></button>
            <button class="mode-btn" onclick="setMode('master')">ä¿®å£«<span>å°‚é–€è§£æ</span></button>
            <button class="mode-btn" onclick="setMode('doctor')">åšå£«<span>æœªè§£æ±ºèª²é¡Œ</span></button>
        </div>
    </div>

    <div id="main-view">
        <button id="back-home" class="nav-btn" onclick="goHome()">ğŸ  ãƒ¢ãƒ¼ãƒ‰é¸æŠã«æˆ»ã‚‹</button>
        <h1 id="content-title"></h1>
        <div id="content-body"></div>
        
        <div class="interactive-panel" id="interactive-area">
            <h3 id="panel-title" style="font-size: 1em; margin-bottom: 10px;">ğŸ” æ§‹é€ è§£æãƒ‡ãƒ¼ã‚¿</h3>
            <div id="panel-content"></div>
        </div>

        <div class="nav-bar">
            <button id="prevBtn" class="nav-btn" onclick="prevContent()">â¬…ï¸ å‰ã¸</button>
            <button id="nextBtn" class="nav-btn" onclick="nextContent()">æ¬¡ã¸ â¡ï¸</button>
        </div>
    </div>
</div>

<script>
    let currentMode = 'easy';
    let currentStep = 0;

    const data = {
        easy: {
            title: "ã‚„ã•ã—ã„ã‚³ãƒ¼ã‚¹",
            steps: [
                {
                    header: "ã“ã“ã¯ãªã«ï¼Ÿ",
                    body: "<ruby>å–œåç•ªæ‰€<rt>ããªã°ã‚“ã˜ã‚‡</rt></ruby>ã¯ã€ã‚€ã‹ã—ã®<ruby>å½¹å ´<rt>ã‚„ãã°</rt></ruby>ã ã‚ˆï¼<ruby>é¦–é‡ŒåŸ<rt>ã—ã‚…ã‚Šã˜ã‚‡ã†</rt></ruby>ã¸å‘ã‹ã†ãƒšãƒªãƒ¼ã•ã‚“ã‚‚ã“ã“ã§ä¼‘ã‚“ã ã‚“ã ã€‚",
                    panel: "ğŸ  æŸ±ã‚’è¦‹ã¦ï¼<br>ããã‚’ä¸€æœ¬ã‚‚ä½¿ã‚ãšã«çµ„ã¿ç«‹ã¦ã‚‰ã‚Œã¦ã„ã‚‹ã‚“ã ã‚ˆã€‚ãƒ‘ã‚ºãƒ«ã¿ãŸã„ã ã­ï¼",
                    action: () => updateBars([40, 50, 60])
                },
                {
                    header: "ãƒšãƒªãƒ¼ã•ã‚“ãŒæ¥ãŸï¼",
                    body: "ã‚¢ãƒ¡ãƒªã‚«ã‹ã‚‰é»’èˆ¹ã§ã‚„ã£ã¦ããŸãƒšãƒªãƒ¼æç£ï¼ˆã¦ã„ã¨ãï¼‰ã¯ã€1853å¹´ã«ã“ã“ã‚’<ruby>è¨ª<rt>ãŠã¨ãš</rt></ruby>ã‚ŒãŸã‚“ã ã€‚",
                    panel: "ğŸš¢ èˆ¹ã®ç‡ƒæ–™ï¼ˆçŸ³ç‚­ï¼‰ã‚„ã€é£Ÿã¹ç‰©ã‚’ã‚ã‘ã¦ã‚‚ã‚‰ã†ã®ãŒç›®çš„ã ã£ãŸã‚“ã ã‚ˆã€‚",
                    action: () => updateBars([20, 90, 40])
                }
            ]
        },
        normal: {
            title: "ãµã¤ã†ã‚³ãƒ¼ã‚¹",
            steps: [
                {
                    header: "è¡Œæ”¿æ‹ ç‚¹ã¨ã—ã¦ã®ç•ªæ‰€",
                    body: "å–œåç•ªæ‰€ã¯ç¾åœ¨ã®èª­è°·æ‘å½¹å ´ã®ã‚ˆã†ãªå½¹å‰²ã‚’æŒã£ã¦ã„ã¾ã—ãŸã€‚åœ°åŸŸã®çµ±æ²»ã€æƒ…å ±ã®ä¼é”ã€ãã—ã¦å®¿é“ã®ç®¡ç†ã‚’è¡Œã£ã¦ã„ã¾ã—ãŸã€‚",
                    panel: "ğŸ§± ä¼çµ±å»ºç¯‰ï¼š<br>é‡˜ã‚’ä½¿ã‚ãšã«æœ¨ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã€Œè²«ï¼ˆã¬ãï¼‰å·¥æ³•ã€ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚",
                    action: () => updateBars([50, 60, 50])
                },
                {
                    header: "æ­´å²ã®èˆå°",
                    body: "1853å¹´ã€ãƒšãƒªãƒ¼ä¸€è¡Œã¯é¦–é‡ŒåŸã¸å‘ã‹ã†é€”ä¸­ã§ã€å–œåç•ªæ‰€ã§ä¼‘æ†©ã—ã€ã‚‚ã¦ãªã—ã‚’å—ã‘ãŸã¨è¨˜éŒ²ã•ã‚Œã¦ã„ã¾ã™ã€‚",
                    panel: "ğŸ“œ è¨˜éŒ²ï¼š<br>å½“æ™‚ã®å¤–äº¤ã«ãŠã‘ã‚‹é‡è¦ãªæ¥å®¢æ‹ ç‚¹ã§ã‚‚ã‚ã£ãŸã“ã¨ãŒã‚ã‹ã‚Šã¾ã™ã€‚",
                    action: () => updateBars([30, 40, 80])
                }
            ]
        },
        real: {
            title: "ãƒªã‚¢ãƒ«ï¼šå°‚é–€å®¶ãƒ¬ãƒ™ãƒ«",
            steps: [
                {
                    header: "ç‰çƒç‹å›½æ™‚ä»£ã®ã€Œé–“åˆ‡ã€è¡Œæ”¿",
                    body: "èª­è°·å±±é–“åˆ‡ï¼ˆã‚†ã‚“ãŸã‚“ã–ã¾ãã‚Šï¼‰ã®è¡Œæ”¿æ‹ ç‚¹ã§ã‚ã‚Šã€åœ°é ­ä»£ä»¥ä¸‹ã®å½¹äººãŒå‹¤å‹™ã—ã¦ã„ã¾ã—ãŸã€‚å»ºç‰©ã¯æˆ¦å¾Œã€å½“æ™‚ã®è³‡æ–™ã«åŸºã¥ãå¿ å®Ÿã«å†å»ºã•ã‚Œã¾ã—ãŸã€‚",
                    panel: "ğŸŒ² ç´ æç‰¹æ€§ï¼š<br>æŸ±ã«ã¯ç™½ã‚¢ãƒªã«å¼·ãã€éå¸¸ã«ç¡¬ã„ã€Œãƒãƒ£ãƒ¼ã‚®ï¼ˆã‚¤ãƒŒãƒã‚­ï¼‰ã€ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã¾ã™ã€‚",
                    action: () => updateBars([80, 70, 90])
                },
                {
                    header: "ãƒšãƒªãƒ¼ã®å¤–äº¤æˆ¦ç•¥",
                    body: "ãƒšãƒªãƒ¼ã¯é¦–é‡ŒåŸã¸ã®å¼·è¡Œå…¥åŸã‚’ç”»ç­–ã™ã‚‹ä¸­ã§ã€è¦æ‰€ã§ã‚ã‚‹å–œåç•ªæ‰€ã‚’è¦–å¯Ÿã—ã€ç‰çƒå´ã®å¯¾å¿œã‚’ã†ã‹ãŒã£ã¦ã„ã¾ã—ãŸã€‚",
                    panel: "âš“ åœ°æ”¿å­¦ï¼š<br>ä¸­ç¶™åœ°ç‚¹ã¨ã—ã¦ã®ç‰çƒã®ä¾¡å€¤ã‚’ç±³å›½ãŒã©ã†è©•ä¾¡ã—ã¦ã„ãŸã‹ãŒé‡è¦ã§ã™ã€‚",
                    action: () => updateBars([60, 50, 100])
                }
            ]
        },
        undergrad: {
            title: "å­¦éƒ¨ç”Ÿï¼šå»ºç¯‰ãƒ»æ­´å²å­¦åŸºç¤",
            steps: [
                {
                    header: "æœ¨é€ æ¶æ§‹æ§‹é€ ã®åŠ›å­¦è§£æ",
                    body: "è²«ï¼ˆã¬ãï¼‰å·¥æ³•ã¯ã€æŸ±ã‚’æ°´å¹³æã§ã¤ãªãã“ã¨ã§å£ã«ä¾å­˜ã›ãšå¼·åº¦ã‚’ä¿ã¤æ¶æ§‹æ§‹é€ ã§ã™ã€‚è€éœ‡æ€§ã¨é€šæ°—æ€§ã‚’ä¸¡ç«‹ã•ã›ã¦ã„ã¾ã™ã€‚",
                    panel: "ğŸ“ å‰›æ€§ã¨é­æ€§ã®ãƒãƒ©ãƒ³ã‚¹ï¼š<br>æœ¨æã®ã€Œã—ãªã‚Šã€ã‚’åˆ©ç”¨ã—ãŸæ¸›è¡°åŠ¹æœã‚’è¨ˆç®—ã«å…¥ã‚ŒãŸè¨­è¨ˆæ€æƒ³ã§ã™ã€‚",
                    action: () => updateBars([90, 80, 70])
                },
                {
                    header: "è¿‘ä¸–ç‰çƒã®è¡Œæ”¿æ©Ÿæ§‹",
                    body: "é¦–é‡Œç‹åºœã«ã‚ˆã‚‹åœ°æ–¹çµ±æ²»ã‚·ã‚¹ãƒ†ãƒ ã«ãŠã‘ã‚‹ç•ªæ‰€ã®ä½ç½®ä»˜ã‘ã€‚é–“åˆ‡ã®è¡Œæ”¿å®Ÿå‹™ã¨å®¿é“ç®¡ç†ã®äºŒé‡æ§‹é€ ã‚’è€ƒå¯Ÿã—ã¾ã™ã€‚",
                    panel: "ğŸ“Š è¡Œæ”¿ãƒ‡ãƒ¼ã‚¿ï¼š<br>æˆ¸ç±ç®¡ç†ã‚„å¾´ç¨å®Ÿå‹™ã«ãŠã‘ã‚‹ç•ªæ‰€ã®åŠ¹ç‡æ€§ã«ã¤ã„ã¦ã€‚",
                    action: () => updateBars([70, 60, 50])
                }
            ]
        },
        master: {
            title: "ä¿®å£«ï¼šæ§‹é€ è§£æã¨å¤–äº¤å²",
            steps: [
                {
                    header: "ä¼çµ±æœ¨é€ å»ºç¯‰ã«ãŠã‘ã‚‹éç·šå½¢è§£æ",
                    body: "ä»•å£ï¼ˆã—ãã¡ï¼‰ã‚„ç¶™æ‰‹ã®æ‘©æ“¦åŠ›ãŒåœ°éœ‡æ™‚ã®ã‚¨ãƒãƒ«ã‚®ãƒ¼å¸åã«å¯„ä¸ã™ã‚‹ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã€‚ç¾ä»£ã®é™ç•Œè€åŠ›è¨ˆç®—ã¨ã®æ¯”è¼ƒæ¤œè¨ã‚’è¡Œã„ã¾ã™ã€‚",
                    panel: "ğŸ”¬ æ‘©æ“¦æ¸›è¡°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼š<br>æœ¨æã®å«æ°´ç‡ãŒæ¥åˆéƒ¨ã®å‰›æ€§ã«ä¸ãˆã‚‹å½±éŸ¿ã‚’ãƒ¢ãƒ‡ãƒ«åŒ–ã€‚",
                    action: () => updateBars([95, 85, 90])
                },
                {
                    header: "19ä¸–ç´€æ±ã‚¢ã‚¸ã‚¢å¤–äº¤ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯",
                    body: "ç‰çƒãƒ»ã‚¢ãƒ¡ãƒªã‚«é–“ã®ã€Œç‰ç±³ä¿®å¥½æ¡ç´„ã€ç· çµã«è‡³ã‚‹ãƒ—ãƒ­ã‚»ã‚¹ã€‚å–œåç•ªæ‰€ã§ã®ã€æ¥é‡ã€ãŒå¤–äº¤ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã«ä¸ãˆãŸå¿ƒç†çš„å½±éŸ¿ã®åˆ†æã€‚",
                    panel: "ğŸ›¡ï¸ å¤–äº¤çš„ç·©è¡ï¼š<br>éå¯¾ç§°å¤–äº¤ã«ãŠã‘ã‚‹ã€å°å›½ã®æŠµæŠ—ã¨èå’Œã®æˆ¦è¡“ã«ã¤ã„ã¦ã€‚",
                    action: () => updateBars([50, 95, 80])
                }
            ]
        },
        doctor: {
            title: "åšå£«ï¼šæœªè§£æ±ºèª²é¡Œã¨æ‰¹åˆ¤çš„è€ƒå¯Ÿ",
            steps: [
                {
                    header: "äºŒé‡æœè²¢ä½“åˆ¶ä¸‹ã«ãŠã‘ã‚‹æ³•çš„åœ°ä½ã®å†å®šç¾©",
                    body: "ä¸‡å›½å…¬æ³•å—å®¹æœŸã«ãŠã‘ã‚‹ç‰çƒã®ä¸»æ¨©è¨€èª¬ã€‚å–œåç•ªæ‰€ã§ã®ä¼šè«‡è¨˜éŒ²ã«è¦‹ã‚‰ã‚Œã‚‹ã€ç¿»è¨³ä¸Šã®æ„å›³çš„ãªã€èª¤èª­ã€ãŒå›½éš›æ³•ä¸Šã®åœ°ä½ã«ã©ã†å¯„ä¸ã—ãŸã‹ã€‚",
                    panel: "ğŸ“œ æ‰¹åˆ¤çš„æ–‡çŒ®èª­è§£ï¼š<br>ä¸€æ¬¡è³‡æ–™ã®ç¿»åˆ»ã«ãŠã‘ã‚‹å¾®ç´°ãªå·®ç•°ãŒæ­´å²èªè­˜ã‚’ã©ã†å¤‰å®¹ã•ã›ã‚‹ã‹ã€‚",
                    action: () => updateBars([90, 30, 95])
                },
                {
                    header: "ä¿å­˜ç§‘å­¦ã¨åœ°åŸŸã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£",
                    body: "ä¼çµ±å»ºç¯‰ã®ã€å†ç¾ã€ãŒæŒã¤æ”¿æ²»æ€§ã€‚å†å»ºã•ã‚ŒãŸå–œåç•ªæ‰€ãŒã€èª­è°·æ‘ã®æ­´å²çš„ãƒŠãƒ©ãƒ†ã‚£ãƒ–ã«ãŠã„ã¦æœãŸã™å½¹å‰²ã¨ã€ãã®çœŸæ­£æ€§ï¼ˆAuthenticityï¼‰ã®è­°è«–ã€‚",
                    panel: "ğŸº ä¿å­˜ç§‘å­¦ï¼š<br>21ä¸–ç´€ã«ãŠã‘ã‚‹æ–‡åŒ–è²¡ã®ã€å‹•æ…‹ä¿å­˜ã€ã®å¯èƒ½æ€§ã«ã¤ã„ã¦ã€‚",
                    action: () => updateBars([10, 100, 60])
                }
            ]
        }
    };

    function setMode(mode) {
        currentMode = mode;
        currentStep = 0;
        document.getElementById('mode-screen').style.display = 'none';
        document.getElementById('main-view').style.display = 'block';
        updateContent();
    }

    function goHome() {
        document.getElementById('mode-screen').style.display = 'flex';
        document.getElementById('main-view').style.display = 'none';
    }

    function updateBars(heights) {
        let canvas = document.querySelector('.building-canvas');
        if (!canvas) {
            canvas = document.createElement('div');
            canvas.className = 'building-canvas';
            document.getElementById('panel-content').appendChild(canvas);
        }
        canvas.innerHTML = '';
        heights.forEach(h => {
            const bar = document.createElement('div');
            bar.className = 'bar';
            bar.style.height = '0%';
            canvas.appendChild(bar);
            setTimeout(() => bar.style.height = h + '%', 50);
        });
    }

    function updateContent() {
        const modeData = data[currentMode];
        const step = modeData.steps[currentStep];
        
        document.getElementById('content-title').innerText = modeData.title;
        document.getElementById('content-body').innerHTML = `<h3>${step.header}</h3><p>${step.body}</p>`;
        document.getElementById('panel-content').innerHTML = `<p>${step.panel}</p>`;
        
        // ãƒœã‚¿ãƒ³ã®æœ‰åŠ¹ãƒ»ç„¡åŠ¹åˆ‡ã‚Šæ›¿ãˆ
        document.getElementById('prevBtn').disabled = (currentStep === 0);
        document.getElementById('nextBtn').disabled = (currentStep === modeData.steps.length - 1);
        
        if (step.action) step.action();
        document.getElementById('main-view').scrollTop = 0;
    }

    function nextContent() {
        if (currentStep < data[currentMode].steps.length - 1) {
            currentStep++;
            updateContent();
        }
    }

    function prevContent() {
        if (currentStep > 0) {
            currentStep--;
            updateContent();
        }
    }
</script>

</body>
</html>
