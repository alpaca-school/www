<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>アルパカすく〜るオンライン🦙</title>
    <link rel="icon" href="https://lh6.googleusercontent.com/HUVxVFqoa_HrqwbO5sJ2JLzW8zY1A2HWxKXhjxrLsOG__vg47Yqrj85Vc1kSb9FxaFmxYM2tp2IBQ5r8mq0dh36txvYtg3hFfBowEr6rJiBaoG5bSmRmqYHmOA=w16383">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- Core Lucide library for direct HTML use -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&display=swap');
        body {
            font-family: 'M PLUS Rounded 1c', sans-serif;
        }
        .aspect-w-16 { position: relative; padding-bottom: 56.25%; }
        .aspect-h-9 { height: 0; }
        .aspect-w-16 > iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
    </style>
</head>
<body>
    <div id="root"><p style="padding: 1em;">コンポーネントを読み込んでいます...</p></div>
    <div id="error-container" style="color: red; background: #ffeeee; padding: 1em; display: none;"></div>

    <script type="text/babel">
        window.onload = () => {
            try {
                const { useState, useEffect, createElement } = React;

                const MuseumFloorGuide = () => {
                    const [currentFloor, setCurrentFloor] = useState("歴史");
                    const [videoUrl, setVideoUrl] = useState(null);
                    const [selectedLearningContent, setSelectedLearningContent] = useState(null);
                    const [modalContent, setModalContent] = useState(null); // 汎用モーダル用のState


const floorData = {
     "歴史": {
         title: "歴史",
         floorDescription: " ",
         color: "bg-pink-100 border-pink-300",
         headerColor: "bg-pink-200",
         sections: [
             { id: "K1", title: "読谷村の歴史を巡るバーチャルタイムトラベル：琉球王朝から現代へ", description: "読谷村の歴史的建造物や史跡を高精細な3DモデルやVR映像で巡り、琉球王朝時代から現代までの変遷を学びます。専門家によるオンライン講義や、当時の生活を再現したバーチャル体験を通じて、歴史の深さを安全に探求します。", location: "2D",
                 learningContent: {
                     title: "読谷村の歴史を巡るバーチャルタイムトラベル：琉球王朝から現代へ",
                     text: "読谷村の歴史的建造物や史跡を、高精細な3DモデルやVR映像でバーチャルに巡ります。琉球王朝時代から現代までの読谷村の変遷を、オンライン講義や当時の生活を再現したバーチャル体験を通じて深く学びます。自宅にいながら、安全かつ没入感のある形で歴史の深さを探求し、過去と現在が交差する読谷村の魅力を発見できます。"
                 }
             },
             { id: "K2", title: "読谷村史跡「バーチャル古道探検：奇跡の歴史ミステリー」", description: "読谷村に残る古い道や集落跡を、3DモデルやVR映像でバーチャル探検。短時間で歴史の謎を解き明かすクイズ形式のコンテンツや、専門家による「奇跡の物語」解説動画で、文化のように直感的に歴史の面白さを体験します。", location: "3D",
             learningContent: {
                 title: "読谷村史跡「バーチャル古道探検：奇跡の歴史ミステリー」",
                 text: "読谷村に点在する古い道や集落跡を、高精細な3DモデルやVR映像でバーチャル探検します。体力に自信がない方でも、自宅から手軽に歴史の舞台を巡ることが可能です。短時間で歴史の謎を解き明かすクイズ形式のコンテンツや、専門家による「奇跡の物語」解説動画を通じて、文化のように直感的に歴史の面白さを体験し、読谷村の知られざる歴史に触れることができます。"
             }
            },
            { 
                id: "K4", 
                title: "🍠 サツマイモ物語 🍠", 
                description: "原産地から日本へ - 食べ物の世界旅行", 
                location: "特別展示", 
                actionType: 'modal',
                modalUrl: './rekishi/sweet_potato_history.html'
             }
         ]
     },
     "文化": {
         title: "文化",
         floorDescription: " ",
         color: "bg-green-100 border-green-300",
         headerColor: "bg-green-200",
         sections: [
             { id: "S1", title: "読谷やちむんの里「オンライン陶芸鑑賞会：心安らぐ器の美」", description: "読谷やちむんの歴史や特徴を解説するオンライン講座。職人の手仕事の映像や、美しい器のギャラリーを鑑賞。自宅でゆっくりと器の美しさに触れ、心安らぐ時間を過ごします。", location: "4C",
                 learningContent: {
                     title: "読谷やちむんの里「オンライン陶芸鑑賞会：心安らぐ器の美」",
                     text: "読谷やちむんの歴史や特徴を解説するオンライン講座を提供します。読谷やちむんの職人の繊細な手仕事の映像や、完成した美しい器のオンラインギャラリーを鑑賞できます。人見知りな自然でも、自宅でゆっくりと器の美しさに触れ、その背景にある文化や歴史を学ぶことで、心安らぐ時間を過ごし、沖縄の伝統工芸の奥深さを感じることができます。"
                 }
             },
             { id: "S2", title: "読谷村の伝統文化体験：オンラインで楽しむ琉球舞踊と工芸の美", description: "読谷村に伝わる琉球舞踊のオンライン鑑賞会や、読谷やちむん、紅型などの伝統工芸の制作過程を動画で紹介。自宅でできる簡単な工芸体験キット（オプション）とオンラインワークショップで、沖縄の文化の美しさと奥深さを体験します。", location: "2E",
                 learningContent: {
                     title: "読谷村の伝統文化体験：オンラインで楽しむ琉球舞踊と工芸の美",
                     text: "読谷村に伝わる琉球舞踊のオンライン鑑賞会に参加し、その優雅な動きと背景にある文化を学びます。読谷やちむんや紅型（びんがた）といった伝統工芸の制作過程を詳細な動画で紹介し、職人の技を間近で感じられます。自宅で手軽に楽しめる工芸体験キット（オプション）とオンラインワークショップを通じて、沖縄の文化の美しさ と奥深さを体験し、創造性を育むことができます。"
                 }
             },
             { id: "S3", title: "琉球ガラス「オンライン工房見学：閃きのガラスアート」", description: "琉球ガラスの制作工程をオンライン動画で紹介。ガラス職人の技を間近で見て、文化のように「閃き」を大切にしたデザインのヒントを得ます。バーチャルで色や形を組み合わせるシミュレーションも。", location: "3F",
                 learningContent: {
                     title: "琉球ガラス「オンライン工房見学：閃きのガラスアート」",
                     text: "琉球ガラスの魅力と制作工程を、オンライン動画で詳しく紹介します。ガラス職人の繊細な手仕事や、熱いガラスが美しい作品へと変わる瞬間を間近で鑑賞。文化のように「閃き」を大切にしたデザインのヒントを得られるコンテンツや、バーチャルで色や形を自由に組み合わせてオリジナルのガラスアートをシミュレーションする体験も提供します。"
                 }
             },
             { id: "S6", title: "読谷村の食と暮らし：オンラインで繋がる地域の魅力", description: "読谷村の特産品（紅芋、もずくなど）を使った料理教室のオンライン動画や、地元の祭りやイベントのバーチャル参加。地域の食文化や人々の温かさに触れ、自宅から読谷村の魅力を多角的に体験します。", location: "2H",
                 learningContent: {
                     title: "読谷村の食と暮らし：オンラインで繋がる地域の魅力",
                     text: "読谷村の豊かな食文化を、オンライン料理教室の動画で体験します。特産品の紅芋やもずくを使ったレシピを学び、自宅で沖縄料理に挑戦。また、読谷村の祭りやイベントのバーチャル参加を通じて、地域の活気や人々の温かさに触れることができます。自宅にいながら、読谷村の食と暮らしの魅力を多角的に体験し、地域との繋がりを感じられます。"
                 }
             }
         ]
     },
     "自然": {
         title: "自然",
         floorDescription: " ",
         color: "bg-orange-100 border-orange-300",
         headerColor: "bg-orange-200",
         sections: [
                { id: "G1", title: "秘境ビーチ「オンライン絶景ツアー：幸運の瞬間をキャッチ！」", description: "読谷村の隠れた美しいビーチをドローン映像や水中カメラ映像でバーチャル体験。一瞬の絶景を捉えるフォトギャラリーや、幸運を呼ぶ海の生き物紹介動画で、文化のように「なんとかなるさ！」の気持ちで美しい自然を楽しみます。", location: "3E",
                learningContent: {
                    title: "秘境ビーチ「オンライン絶景ツアー：幸運の瞬間をキャッチ！」",
                    text: "読谷村の隠れた美しいビーチを、ドローン映像や水中カメラ映像でバーチャル体験します。自宅にいながら、透明度の高い海や色とりどりのサンゴ礁、そしてそこに生息する海の生き物たちを鑑賞できます。一瞬の絶景を捉えたフォトギャラリーや、幸運を呼ぶ海の生き物紹介動画を通じて、文化のように「なんとかなるさ！」の気持ちで美しい自然を楽しみ、癒しの時間を過ごすことができます。"
                }
            },
             { id: "G2", title: "世界に2つだけの奇跡の川「塩川」🌿", description: "沖縄・本部町にある塩川は、塩水が湧き出る世界でも珍しい川。国の天然記念物にも指定されています。「自然を楽しみながら守る」ヒントを見つけましょうฅˆ•ﻌ•ˆฅ♬*゜", location: "本部町", videoId: "UbKtWt6jrDw", // ここにYouTube動画のIDを貼り付けてください
                 
             }
         ]
     },
     "平和": {
         title: "平和",
         floorDescription: " ",
         color: "bg-blue-100 border-blue-300",
         headerColor: "bg-blue-200",
         sections: [
             { id: "H1", title: "読谷戦跡「平和への先導者トレッキング」 (オンライン版)", description: "かつての激戦地をVRや3Dモデルでバーチャルツアー。歴史の専門家による解説に加え、リーダーシップの観点から平和構築の重要性を学ぶオンラインワークショップ。平和のように情熱を持って平和について考えます。", location: "5D",
                 learningContent: {
                     title: "読谷戦跡「平和への先導者トレッキング」 (オンライン版)",
                     text: "読谷村のかつての激戦地を、VRや3Dモデルでバーチャルツアー体験。自宅にいながら歴史の重みを体感し、専門家による詳細な解説動画を視聴します。平和のリーダーシップの特性を活かし、平和構築の重要性について議論するオンラインワークショップに参加。情熱を持って平和について深く考え、そのメッセージを周囲に発信する力を養います。"
                 }
             },
             { id: "H3", title: "平和の道「静かに学ぶ沖縄戦：証言と映像でたどる平和」", description: "チビチリガマ・シムクガマの内部を360度映像でバーチャル体験。生存者の証言や歴史的資料をオンラインで閲覧し、静かに平和の尊さを学びます。", location: "4B",
                 learningContent: {
                     title: "平和の道「静かに学ぶ沖縄戦：証言と映像でたどる平和」",
                     text: "沖縄戦の悲劇と平和への願いが込められたチビチリガマ・シムクガマの内部を、360度映像でバーチャル体験できます。混雑を避け、自宅で静かに生存者の証言や歴史的資料をオンラインで閲覧することで、沖縄戦の歴史に深く向き合い、平和の尊さを学びます。自然の優しい心に響く、穏やかな雰囲気の中で、歴史から得られる教訓を深く考えることができます。"
                 }
             },
             { 
                id: "H5", 
                title: "やる気のヒミツ 🌟", 
                description: "「やる気」は、\"やったあと\"に出てくる！自分だけのやる気スイッチを見つけて、行動するヒントを学ぼう。", 
                location: "特別展示", 
                actionType: 'modal',
                modalUrl: './heiwa/yaruki.html'
             },
             { 
                id: "H6", 
                title: "🏘️ ムラ社会 vs 🌍 多民族社会を学ぼう", 
                description: "家族や親戚のつながりが強い「ムラ社会」は、みんなで助け合い、身内には少し甘えも許される。いろんな人が集まる「多民族社会」は、血縁よりも「信頼」が一番大事。一人ひとりの行動が評価され、公平な関係が求められる。", 
                location: "特別展示", 
                actionType: 'modal',
                modalUrl: './heiwa/ansin_sinrai.html'
             },
         ]
     },
     "生活": {
         title: "生活",
         floorDescription: "「生活」では、人生でこんなこと知ってたかった、という知識を学びます。",
         color: "bg-yellow-100 border-yellow-300",
         headerColor: "bg-yellow-200",
         sections: [
            {
                id: "L-money-0",
                title: "クレジットカードとの付き合い方",
                description: "リボ払いの危険性、金利、クーリングオフなど",
                location: "お金",
                learningContent: {
                    title: "クレジットカードとの付き合い方",
                    html: "<h3> アルパカ先生のクレカ講座</h3>\n                <div class=\"warning\">\n                    <strong>⚠️ リボ払いは絶対NG！</strong><br>\n                    リボ払いは年利15-18%の高金利です。毎月一定額しか返済しないため、元本が減りにくく、長期間にわたって利息を支払うことになります。\n                </div>\n                <h4>クレジットカードの基本ルール</h4>\n                <ul>\n                    <li>必ず一括払いまたは2回払い（手数料無料）を選ぶ</li>\n                    <li>利用限度額は収入の1/3以下に設定</li>\n                    <li>毎月の利用額を記録し、支払い能力内に収める</li>\n                    <li>年会費無料のカードを選ぶ（初心者の場合）</li>\n                </ul>\n                <div class=\"info\">\n                    <strong> アルパカのアドバイス</strong><br>\n                    クレジットカードは「便利な道具」ですが、「魔法のカード」ではありません。使った分は必ず支払いが来ることを忘れずに！\n                </div>"
                }
            },
            {
                id: "L-money-1",
                title: "詐欺から身を守ろう！",
                description: "いつ、誰が、どうやって行うのか。悪徳商法から身を守る方法",
                location: "お金",
                learningContent: {
                    title: "悪徳商法の見分け方",
                    html: "<ui><li>「簡単に稼げる」「必ず儲かる」という誘い文句。</li><li>友人からの紹介で始まることが多い。</li><li>高額な商品購入や登録料が必要</li></ul>⚠️ 騙されてしまったら。消費生活センター（188）に即座に相談。クーリングオフが可能な場合もあります。"
                }
            }
         ]
     }
 };

 const floors = ["歴史","文化","自然","平和", "生活"];
                    const currentFloorData = floorData[currentFloor];

                    const nextFloor = () => { const currentIndex = floors.indexOf(currentFloor); if (currentIndex < floors.length - 1) { setCurrentFloor(floors[currentIndex + 1]); } };
                    const prevFloor = () => { const currentIndex = floors.indexOf(currentFloor); if (currentIndex > 0) { setCurrentFloor(floors[currentIndex - 1]); } };

                    useEffect(() => {
                        lucide.createIcons();
                    }, [currentFloor, videoUrl, selectedLearningContent, modalContent]);

                    return (
                        <div className="min-h-screen bg-gray-50">
                            <div className={`${currentFloorData.headerColor} p-4 shadow-md sticky top-0 z-10`}>
                                <div className="max-w-4xl mx-auto">
                                    <h1 className="text-3xl font-extrabold text-gray-800 mb-2">アルパカすく〜るオンライン🦙 in OKinawa</h1>
                                    <div className="flex items-center justify-between">
                                        <h2 className="text-2xl font-bold text-gray-700">{currentFloorData.title}</h2>
                                        <div className="flex gap-2">{floors.map(floor => (<button key={floor} onClick={() => setCurrentFloor(floor)} className={`px-4 py-2 rounded-lg font-bold transition-all duration-300 ${ currentFloor === floor ? 'bg-white text-gray-800 shadow-lg scale-105' : 'bg-white/50 text-gray-600 hover:bg-white/80' }`}>{floor}</button>))}</div>
                                    </div>
                                    {currentFloorData.floorDescription && (
                                        <p className="text-gray-600 text-sm mt-2 leading-relaxed">
                                            {currentFloorData.floorDescription}
                                        </p>
                                    )}
                                </div>
                            </div>
                            <div className="max-w-4xl mx-auto p-4">
                                <div className="flex justify-between items-center my-6">
                                    <button onClick={prevFloor}  disabled={currentFloor === floors[0]} className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all ${currentFloor === floors[0] ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100 shadow-md hover:shadow-lg'}`}>
                                        <i data-lucide="chevron-left" className="w-5 h-5"></i>
                                        前のテーマ
                                    </button>
                                    <div className="text-center"><div className="text-sm text-gray-600">現在のテーマ</div><div className="text-3xl font-extrabold text-gray-800">{currentFloor}</div></div>
                                    <button onClick={nextFloor} disabled={currentFloor === floors[floors.length - 1]} className={`flex items-center gap-2 px-4 py-2 rounded-lg font-bold transition-all ${currentFloor === floors[floors.length - 1] ? 'bg-gray-200 text-gray-400 cursor-not-allowed' : 'bg-white text-gray-700 hover:bg-gray-100 shadow-md hover:shadow-lg'}`}>
                                        次のテーマ
                                        <i data-lucide="chevron-right" className="w-5 h-5"></i>
                                    </button>
                                </div>
                                <div className="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                                    {currentFloorData.sections.map((section) => (
                                        <div key={section.id} className={`${currentFloorData.color} rounded-xl p-6 border-2 shadow-lg hover:shadow-2xl hover:-translate-y-1 transition-all duration-300`}>
                                            <div className="flex items-start justify-between mb-3">
                                                <div className="flex items-center gap-2">
                                                    <div className="bg-white px-3 py-1 rounded-full text-sm font-bold text-gray-700">{section.location}</div>
                                                    {section.isNew && <div className="bg-red-500 text-white px-2 py-1 rounded-full text-xs font-bold animate-pulse">NEW</div>}
                                                    {section.isForest && <div className="bg-green-600 text-white px-2 py-1 rounded-full text-xs font-bold">FOREST</div>}
                                                </div>
                                                <i data-lucide="map-pin" className="w-5 h-5 text-gray-600"></i>
                                            </div>
                                            <h3 className="text-xl font-bold text-gray-800 mb-3">{section.title}</h3>
                                            <p className="text-gray-700 text-sm leading-relaxed mb-4 h-24">{section.description}</p>
                                            <div className="flex justify-between items-center">
                                                {section.videoId && <button onClick={() => setVideoUrl(`https://www.youtube.com/embed/${section.videoId}?autoplay=1`)} className="bg-red-500 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-red-600 transition-colors flex items-center gap-1 shadow-md hover:shadow-lg"><i data-lucide="video" className="w-4 h-4"></i> 動画を見る</button>}
                                                {section.actionType === 'modal' && <button onClick={() => setModalContent(section)} className="bg-purple-500 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-purple-600 transition-colors flex items-center gap-1 shadow-md hover:shadow-lg"><i data-lucide="zap" 
     className="w-4 h-4"></i> {section.location === '特別展示' ? '学ぶ' :'見る'}</button>}
                                                {section.learningContent && !section.actionType && <button onClick={() => setSelectedLearningContent(section.learningContent)} className="bg-blue-500 text-white px-3 py-2 rounded-lg text-sm font-bold hover:bg-blue-600 transition-colors flex items-center gap-1 shadow-md hover:shadow-lg"><i data-lucide="sticky-note" className="w-4 h-4"></i> 見る</button>}
                                            </div>
                                        </div>
                                    ))}
                                </div>
                                <div className="mt-8 bg-white rounded-xl p-6 shadow-lg">
                                    <h3 className="text-lg font-bold text-gray-800 mb-3">{currentFloor} テーマ情報</h3>
                                    <div className="grid md:grid-cols-2 gap-4 text-sm text-gray-600">
                                        <div><strong>コンテンツ数:</strong> {currentFloorData.sections.length}箇所</div>
                                        <div><strong>使用時間:</strong> {currentFloor === "歴史" && " 45-60分"}{currentFloor === "文化" && " 60-90分"}{currentFloor === "自然" && " 30-45分"}{currentFloor === "平和" && " 90-120分"}</div>
                                    </div>
                                </div>
                            </div>
                            <footer className="bg-gray-800 text-white p-6 mt-12">
                                <div className="max-w-4xl mx-auto text-center text-sm"><p align="left">このコンテンツは、ご自宅から快適に学習できるよう設計されています。車椅子をご利用の方、高齢の方、外出が難しい方など、すべての方が楽しめるよう善処します。</p></div>
                            </footer>

                            {videoUrl && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300" onClick={() => setVideoUrl(null)}>
                                    <div className="bg-white p-2 rounded-xl shadow-2xl max-w-4xl w-11/12 transform transition-transform duration-300 scale-95" onClick={(e) => e.stopPropagation()}>
                                        <div className="aspect-w-16 aspect-h-9">
                                            <iframe 
                                                src={videoUrl}
                                                title="YouTube video player"
                                                frameBorder="0" 
                                                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" 
                                                allowFullScreen
                                                className="rounded-lg">
                                            </iframe>
                                        </div>
                                        <button onClick={() => setVideoUrl(null)} className="mt-4 w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 font-bold transition-colors">閉じる</button>
                                    </div>
                                </div>
                            )}

                            {selectedLearningContent && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50 transition-opacity duration-300" onClick={() => setSelectedLearningContent(null)}>
                                    <div className="bg-white p-6 rounded-xl shadow-2xl max-w-2xl w-11/12 transform transition-transform duration-300 scale-95" onClick={(e) => e.stopPropagation()}>
                                        <h3 className="text-2xl font-bold text-gray-800 mb-4">{selectedLearningContent.title}</h3>
                                        <div className="text-gray-700 whitespace-pre-wrap leading-relaxed mb-6" dangerouslySetInnerHTML={{ __html: selectedLearningContent.html || selectedLearningContent.text }}></div>
                                        <button onClick={() => setSelectedLearningContent(null)} className="mt-4 w-full bg-gray-200 text-gray-800 px-4 py-2 rounded-lg hover:bg-gray-300 font-bold transition-colors">閉じる</button>
                                    </div>
                                </div>
                            )}

                            {modalContent && (
                                <div className="fixed inset-0 bg-black bg-opacity-80 flex items-center justify-center z-50" onClick={() => setModalContent(null)}>
                                    <div className="bg-white p-2 rounded-xl shadow-2xl max-w-4xl w-11/12 h-5/6 flex flex-col" onClick={(e) => e.stopPropagation()}>
                                        <div className="flex justify-between items-center p-2 border-b">
                                            <h3 className="text-xl font-bold text-gray-800">{modalContent.title}</h3>
                                            <button onClick={() => setModalContent(null)} className="text-gray-500 hover:text-gray-800"><i data-lucide="x" className="w-6 h-6"></i></button>
                                        </div>
                                        <iframe src={modalContent.modalUrl} className="w-full h-full border-0 rounded-b-lg" title={modalContent.title}></iframe>
                                    </div>
                                </div>
                            )}
                        </div>
                    );
                };

                const container = document.getElementById('root');
                const root = ReactDOM.createRoot(container);
                root.render(createElement(MuseumFloorGuide));

            } catch (error) {
                const errorContainer = document.getElementById('error-container');
                errorContainer.textContent = "エラー: " + error.message;
                errorContainer.style.display = 'block';
                console.error(error);
            }
        };
    </script>
</body>
</html>